
[project]
name = "renewable"
channels = ["conda-forge"]
platforms = ["linux-64", "win-64"]

[dependencies]
python = "3.12.*"  # Keep python in conda
pip = ">=25.2,<26"  # Keep pip in conda
pytest = ">=8.4.2,<9"
jupyterlab = "*"
ipykernel = "*"

[pypi-dependencies]
numpy = ">=1.24"
pandas = ">=2.0"
pyarrow = ">=14.0"
fastparquet = ">=2023.10"
xarray = ">=2023.1"
dask = ">=2023.1"
zarr = ">=2.16"
matplotlib = ">=3.7"
netcdf4 = ">=1.6"
h5netcdf = ">=1.2"
json5 = ">=0.9"
tqdm = ">=4.65"
python-dotenv = ">=1.0"
omegaconf = ">=2.3"
debugpy = ">=1.6"
cdsapi = ">=0.7"
cfgrib = ">=0.8.4"
cartopy = ">=0.25"
ecmwf-api-client = "*"
ecmwf-opendata = "*"
geopandas = "*"
folium = "*"

# Define the default environment
[environments]
default = { solve-group = "default" }

# Tasks for kernel registration
[tasks]
# Automatically setup kernel after install
postinstall = "setup-kernel"

# Register the renewable kernel with user's Jupyter
setup-kernel = "python -m ipykernel install --user --name renewable --display-name 'renewable (pixi)'"

# Start JupyterLab
notebook = "jupyter lab"

# List installed kernels
list-kernels = "jupyter kernelspec list"

# Remove the renewable kernel
clean-kernel = "jupyter kernelspec remove -f renewable || echo 'Kernel not found'"
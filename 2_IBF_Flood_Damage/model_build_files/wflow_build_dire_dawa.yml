steps:
  - setup_config:                 # options parsed to wflow toml file <section>.<option>
      data:
        time.starttime: 2024-06-01T00:00:00
        time.endtime: 2024-06-27T00:00:00
        time.timestepsecs: 3600
        input.path_forcing: era5_hourly.nc
        output.netcdf_grid.path: output.nc
        output.netcdf_grid.compressionlevel: 1
        output.netcdf_grid.variables.river_water__volume_flow_rate: q_av

  - setup_basemaps:
      hydrography_fn: merit_hydro_v1.0   # source hydrography data {merit_hydro, merit_hydro_1k}
      basin_index_fn: merit_hydro_index_v1.0 # source of basin index corresponding to hydrography_fn
      upscale_method: ihu           # upscaling method for flow direction data, by default 'ihu'
      res: 0.00833333           # build the model at a 30 arc sec (~1km) resolution
      region: # model region
        subbasin: [41.85217, 9.76999] # derive a subbasin with its outlet at the given x,y coordinates
        strord: 4 # snapped to a river with minimum stream order (strord) of 4
        # bounds: [41.02, 8.12, 43.02, 10.12] # within the given bounds [xmin, ymin, xmax, ymax] (WGS84)

  - setup_precip_forcing:      # Move AFTER basemaps
      precip_fn: era5_hourly

  - setup_temp_pet_forcing:    # Move AFTER basemaps
      temp_pet_fn: era5_hourly
      press_correction: True
      temp_correction: True
      pet_method: debruin
      skip_pet: False


  - setup_rivers:
      hydrography_fn: merit_hydro_v1.0  # source hydrography data, should correspond to hydrography_fn in setup_basemaps
      # river_geom_fn: rivers_lin2019_v1 # river source data with river width and bankfull discharge
      river_upa: 10               # minimum upstream area threshold for the river map [km2]
      rivdph_method: powlaw           # method to estimate depth {'powlaw', 'manning', 'gvf'}
      min_rivdph: 1                # minimum river depth [m]
      min_rivwth: 30               # minimum river width [m]
      slope_len: 2000             # length over which tp calculate river slope [m]
      smooth_len: 5000             # length over which to smooth river depth and river width [m]
      river_routing: kinematic_wave    # {'kinematic_wave', 'local_inertial'}

  - setup_riverwidth:
      precip_fn: chelsa      # source for precip climatology used to estimate discharge: {chelsa}
      climate_fn: koppen_geiger # source for climate classification used to estimate discharge: {koppen_geiger}
      predictor: discharge     # predictor used in power-law w=a*predictor^b {'discharge'; 'uparea', other staticmaps}; a and b can also be set here.
      fill: False         # if False all river width values are set based on predictor, if True only data gaps and lakes/reservoirs in observed width are filled (works only with MERIT hydro)
      min_wth: 1             # global minimum width

  # - setup_floodplains: # if 1D floodplains are required
  #     hydrography_fn: merit_hydro_v1.0      # source hydrography data, should correspond to hydrography_fn in setup_basemaps
  #     floodplain_type: 1d    # If one-dimensional floodplains are required
  #     flood_depths: [0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 4.0, 5.0] # flood depths at which a volume is derived

  # - setup_reservoirs_simple_control:
  #     reservoirs_fn: hydro_reservoirs  # source for reservoirs shape and attributes
  #     timeseries_fn: gww           # additional source for reservoir are timeseries to compute reservoirs, Either 'gww' using gwwapi or 'jrc' using hydroengine.
  #     min_area: 1.0           # minimum lake area to consider [km2]

  # - setup_reservoirs_no_control:
  #     reservoirs_fn: hydro_lakes   # source for uncontrolled reservoirs (e.g. lakes) based on hydroLAKES: {hydro_lakes}
  #     min_area: 10.0          # minimum reservoir area to consider [km2]

  # - setup_glaciers:
  #     glaciers_fn: rgi           # source for glaciers based on Randolph Glacier Inventory {rgi}
  #     min_area: 0.0           # minimum glacier area to consider [km2]

  - setup_lulcmaps:
      lulc_fn : vito   # source for lulc maps: {globcover, vito, corine}
      # lulc_mapping_fn: vito_default  # default mapping for lulc classes

  - setup_laimaps:
      lai_fn: modis_mcd15a3h_v006     # source for Leaf Area Index: {modis_lai}

  - setup_soilmaps:
      soil_fn: soilgrids_2020     # source for soilmaps: {soilgrids}
      ptf_ksatver: brakensiek    # pedotransfer function to calculate hydraulic conductivity: {brakensiek, cosby}

  - setup_outlets:
      river_only: True

  - setup_constant_pars:
      "subsurface_water__horizontal_to_vertical_saturated_hydraulic_conductivity_ratio": 100
      "snowpack__degree_day_coefficient": 3.75653
      "soil_surface_water__infiltration_reduction_parameter": 0.038
      "vegetation_canopy_water__mean_evaporation_to_mean_precipitation_ratio": 0.11
      "compacted_soil_surface_water__infiltration_capacity": 5
      "soil_water_saturated_zone_bottom__max_leakage_volume_flux": 0
      "soil_wet_root__sigmoid_function_shape_parameter": -500
      "atmosphere_air__snowfall_temperature_threshold": 0
      "atmosphere_air__snowfall_temperature_interval": 2
      "snowpack__melting_temperature_threshold": 0
      "snowpack__liquid_water_holding_capacity": 0.1
      "glacier_ice__degree_day_coefficient": 3
      "glacier_firn_accumulation__snowpack_dry_snow_leq_depth_fraction": 0.001
      "glacier_ice__melting_temperature_threshold": 0